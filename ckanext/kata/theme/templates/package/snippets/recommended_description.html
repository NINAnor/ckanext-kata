{% import 'macros/form.html' as form %}
{% import 'macros/kata_form.html' as kata_form %}

{% if not data.description %}
  {% data.description = [] %}
{% endif %}

{% do data.description.append({'text': data.notes, 'lang': h.lang()}) %}

<h3 class="module-heading-add-dataset optional">{{ _('Free description') }}{{ kata_form.optional() }}</h3>
<div class="module-content optional">
{#% sjdlk %#}
  {% for note in data.description %}
    {{ form.markdown('description', id='field-description', label=_('Description'), placeholder=_('a freeform description'), value=note, error=errors.description) }}
    {# The tooltip can't be inserted so that it would look nice. If needed, add the tooltip below later. #}
<!--  {{ kata_form.tooltip(tooltip=_('Type a description about the data over here. The field can be filled with free text and you can format the text with Markdown formatting.')) }}  -->
  {% endfor %}
</div>
