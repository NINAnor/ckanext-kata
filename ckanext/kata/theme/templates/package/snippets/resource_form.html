{% ckan_extends %}
{% import 'macros/form.html' as form %}

{# override to omit tabs for external file URLs and API links
 # and to turn the file upload radio button into a regular button look-alike
 #}

{% block basic_fields_url %}
  <div class="control-group control-full">
    <label class="control-label control-full" for="resource-upload-btn">{{ _("Supplement") }}</label>
    <div class="controls">
      {% if allow_upload %}
        <div id="resource-upload-btn" class="btn" data-module="resource-upload-field"></div>
      {% else %}
        <p>{{ _('You must be logged in to upload a file.') }}</p>
      {% endif %}
    </div>
    {# override CKAN original for a read-only field (automatically generated) and for layout tweaks #}
  </div>
  {{ form.textarea('url', id='field-url', label=_('URL'), placeholder=_('Automatically generated'), value=data.url, error=errors.url, attrs={'readonly': 'readonly'}, rows=3) }}
{% endblock %}

{# override original inputs for small tweaks #}
{% block basic_fields_name %}
  {{ form.input('name', id='field-name', label=_('Name'), placeholder=_('e.g. Description of variables'), value=data.name, error=errors.name, classes=['control-full']) }}
{% endblock %}

{% block delete_button %}
  <a class="btn btn-default cancel-back-btn pull-left">{{ _('Cancel') }}</a>
  {% if data.id %}
    {% if h.check_access('resource_delete', {'id': data.id})  %}
      {% set locale = h.dump_json({'content': _('Are you sure you want to delete this resource?')}) %}
      <a class="btn btn-danger pull-left" href="{% url_for controller='package', action='resource_delete', resource_id=data.id, id=pkg_name %}" data-module="confirm-action" data-module-i18n="{{ locale }}">{% block delete_button_text %}{{ _('Delete') }}{% endblock %}</a>
    {% endif %}
  {% endif %}
{% endblock %}